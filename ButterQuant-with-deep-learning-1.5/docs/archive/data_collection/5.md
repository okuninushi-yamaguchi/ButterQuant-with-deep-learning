å¤ªæ£’äº†ï¼è¿™æ˜¯ä¸€ä¸ª**éå¸¸å®ç”¨çš„è§£å†³æ–¹æ¡ˆ**ï¼åœ¨ç¾è‚¡ç›˜åã€äºšæ´²äº¤æ˜“æ—¶æ®µè¿è¡Œï¼Œæ—¢é¿å¼€é«˜å³°æœŸåˆèƒ½æä¾›æ¬¡æ—¥æ–°é²œæ•°æ®ã€‚è®©æˆ‘å¸®ä½ è®¾è®¡å®Œæ•´çš„å®ç°æ–¹æ¡ˆã€‚

## ğŸš€ å®Œæ•´å®æ–½æ–¹æ¡ˆ

### **1. é¡¹ç›®ç»“æ„**

```
backend/
â”œâ”€â”€ scheduler/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ daily_scanner.py      # ä¸»æ‰«æè„šæœ¬
â”‚   â”œâ”€â”€ scheduler_manager.py  # å®šæ—¶ä»»åŠ¡ç®¡ç†
â”‚   â””â”€â”€ config.yaml            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ rankings_combined.json # æœ€ç»ˆæ’åç»“æœ
â”‚   â”œâ”€â”€ scan_progress.txt      # æ‰«æè¿›åº¦è®°å½•
â”‚   â””â”€â”€ scan_log.txt          # æ‰«ææ—¥å¿—
â””â”€â”€ utils/
    â””â”€â”€ ticker_utils.py        # è‚¡ç¥¨ä»£ç å·¥å…·
```

---

### **2. æ ¸å¿ƒè„šæœ¬å®ç°**## å®Œç¾æ–¹æ¡ˆï¼âœ¨ å·²ä¸ºä½ å‡†å¤‡å®Œæ•´å®æ–½åŒ…

æˆ‘å·²ç»ä¸ºä½ çš„**æ¯æ—¥è‚¡ç¥¨æ‰«æç³»ç»Ÿ**åˆ›å»ºäº†å®Œæ•´çš„å®æ–½æ–¹æ¡ˆï¼ä½ çš„æ€è·¯éå¸¸æ£’ï¼šåœ¨**ä¸œäº¬æ—¶é—´18ç‚¹**ï¼ˆç¾è‚¡ç›˜åï¼‰å¯åŠ¨æ‰«æï¼Œæ—¢é¿å¼€é«˜å³°åˆèƒ½ä¿è¯æ¬¡æ—¥æ•°æ®æ–°é²œã€‚

---

## ğŸ“¦ ä½ ç°åœ¨æ‹¥æœ‰çš„å®Œæ•´å·¥å…·åŒ…

### **æ ¸å¿ƒè„šæœ¬**ï¼ˆå·²åˆ›å»ºï¼‰
1. **daily_scanner.py** - æ™ºèƒ½æ‰«æå™¨
   - âœ… 15ç§’é—´éš”é¿å…rate limit
   - âœ… é€è¡Œä¿å­˜è¿›åº¦ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰
   - âœ… è‡ªåŠ¨å»é‡çº³æ–¯è¾¾å…‹å’Œæ ‡æ™®500
   - âœ… é¢„è®¡1å°æ—¶å®Œæˆ

2. **scheduler_manager.py** - å®šæ—¶ä»»åŠ¡ç®¡ç†
   - âœ… æ¯å¤©ä¸œäº¬æ—¶é—´18:00è‡ªåŠ¨è¿è¡Œ
   - âœ… å®Œæ•´æ—¥å¿—è®°å½•
   - âœ… æ”¯æŒç«‹å³è¿è¡Œæµ‹è¯•æ¨¡å¼

3. **ticker_utils.py** - è‚¡ç¥¨åˆ—è¡¨å·¥å…·
   - âœ… è‡ªåŠ¨ä»Wikipediaè·å–æœ€æ–°åˆ—è¡¨
   - âœ… æ™ºèƒ½å»é‡å’Œåˆå¹¶
   - âœ… æ”¯æŒæ‰‹åŠ¨æ›´æ–°

4. **StrategyRank.tsx** - å‰ç«¯æ’åé¡µé¢
   - âœ… å®æ—¶åŠ è½½çŠ¶æ€æ˜¾ç¤º
   - âœ… åˆ†é¡µåŠ è½½ï¼ˆæ¯æ¬¡20æ¡ï¼‰
   - âœ… æ•°æ®æ–°é²œåº¦æç¤º
   - âœ… å¤šè¯­è¨€æ”¯æŒ

5. **quick_start.sh** - ä¸€é”®å¯åŠ¨è„šæœ¬
   - âœ… è‡ªåŠ¨å®‰è£…ä¾èµ–
   - âœ… åˆ›å»ºç›®å½•ç»“æ„
   - âœ… é…ç½®systemdæœåŠ¡

---

## ğŸš€ 3å°æ—¶å¿«é€Ÿä¸Šçº¿æŒ‡å—

### **æœ€å¿«è·¯å¾„**ï¼ˆæ¨èï¼‰
```bash
# 1. ä¸‹è½½quick_start.shåˆ°é¡¹ç›®æ ¹ç›®å½•
chmod +x quick_start.sh

# 2. è¿è¡Œ
./quick_start.sh

# 3. é€‰æ‹©æ¨¡å¼
# é€‰é¡¹1: ç«‹å³æµ‹è¯•è¿è¡Œ
# é€‰é¡¹2: å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼ˆ18:00 JSTï¼‰
# é€‰é¡¹3: å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡
```

### **æ‰‹åŠ¨éƒ¨ç½²**ï¼ˆå¦‚æœéœ€è¦ç²¾ç»†æ§åˆ¶ï¼‰
æŒ‰ç…§**å®æ–½æ€»ç»“æ–‡æ¡£**ä¸­çš„6ä¸ªé˜¶æ®µé€æ­¥æ‰§è¡Œã€‚

---

## ğŸ’¡ å…³é”®ä¼˜åŠ¿

### **1. æ—¶é—´ä¼˜åŒ–**
```
18:00 JST å¼€å§‹æ‰«æ â†’ ç¾è‚¡ç›˜åæ•°æ®ç¨³å®š
20:30 JST å®Œæˆ     â†’ æ¬¡æ—¥æ—©æ™¨è®¿é—®æœ€æ–°æ•°æ®
æ¯15ç§’ä¸€æ¬¡è¯·æ±‚     â†’ ç¨³å®šä¸”ä¸è§¦å‘é™æµ
```

### **2. å¯é æ€§**
- **æ–­ç‚¹ç»­ä¼ **: ä¸­æ–­åå¯ä»ä¸Šæ¬¡ä½ç½®ç»§ç»­
- **è¿›åº¦å¯è§**: å®æ—¶æŸ¥çœ‹æ‰«æè¿›åº¦
- **è‡ªåŠ¨é‡è¯•**: å¤±è´¥è‡ªåŠ¨é‡è¯•3æ¬¡
- **æ‰¹é‡ä¿å­˜**: æ¯10ä¸ªè‚¡ç¥¨ä¿å­˜ä¸€æ¬¡

### **3. æ€§èƒ½é¢„ä¼°**
```
æ€»è‚¡ç¥¨æ•°: ~550ä¸ªï¼ˆå»é‡åï¼‰
æ‰«æé€Ÿåº¦: 15ç§’/è‚¡
æ€»è€—æ—¶: 550 Ã— 15ç§’ = 8250ç§’ â‰ˆ 2.3å°æ—¶ âœ…
```

å¦‚æœéœ€è¦åŠ å¿«ï¼Œå¯è°ƒæ•´ä¸º10ç§’é—´éš” â†’ çº¦1.5å°æ—¶å®Œæˆ

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### **åç«¯æ•°æ®æ–‡ä»¶**
```
backend/data/
â”œâ”€â”€ rankings_combined.json     â† å®Œæ•´æ’åï¼ˆæ‰€æœ‰è‚¡ç¥¨ï¼‰
â”œâ”€â”€ rankings_top20.json        â† å‰20åï¼ˆå¿«é€ŸåŠ è½½ï¼‰
â”œâ”€â”€ scan_progress.txt          â† æ‰«æè¿›åº¦è®°å½•
â”‚   æ ¼å¼: 2025-01-07 18:00:15|AAPL|SUCCESS|0.8523
â””â”€â”€ scan_log.txt              â† è¯¦ç»†æ—¥å¿—
```

### **APIç«¯ç‚¹**
```
GET /api/rankings         â† è¿”å›æ‰€æœ‰æ’å
GET /api/rankings/top20   â† è¿”å›å‰20åï¼ˆæ¨èï¼‰
GET /api/rankings/status  â† è¿”å›æ‰«æçŠ¶æ€
```

### **å‰ç«¯é¡µé¢**
è®¿é—® `/rank` å³å¯çœ‹åˆ°å®æ—¶æ’åï¼Œæ”¯æŒï¼š
- âœ… å®æ—¶åŠ è½½çŠ¶æ€
- âœ… æ•°æ®æ–°é²œåº¦æ˜¾ç¤º
- âœ… ç‚¹å‡»è‚¡ç¥¨è·³è½¬è¯¦æƒ…
- âœ… åˆ†é¡µåŠ è½½æ›´å¤š

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### **1. ç¬¬ä¸€æ¬¡è¿è¡Œå‰**
```bash
# å¿…é¡»å…ˆè·å–è‚¡ç¥¨åˆ—è¡¨
python3 backend/utils/ticker_utils.py --update
```

### **2. æœåŠ¡å™¨æ—¶åŒº**
ç¡®ä¿æœåŠ¡å™¨æ—¶åŒºè®¾ç½®æ­£ç¡®ï¼š
```bash
timedatectl set-timezone Asia/Tokyo
```

### **3. é˜²ç«å¢™è®¾ç½®**
å¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼Œç¡®ä¿Flaskç«¯å£å¼€æ”¾ï¼š
```bash
sudo ufw allow 5000/tcp
```

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨æ­¥éª¤

1. **é€‰æ‹©ä¸€ä¸ªèµ·ç‚¹**:
   - å¿«é€Ÿ: ä½¿ç”¨ `quick_start.sh`
   - ç¨³å¦¥: æŒ‰ç…§**å®æ–½æ€»ç»“**é€æ­¥æ‰§è¡Œ

2. **å°è§„æ¨¡æµ‹è¯•**ï¼ˆå¼ºçƒˆæ¨èï¼‰:
   ```bash
   # åªæµ‹è¯•5ä¸ªè‚¡ç¥¨
   echo -e "AAPL\nMSFT\nGOOGL\nAMZN\nNVDA" > backend/data/test.md
   # ä¿®æ”¹scanner.pyä¸´æ—¶åŠ è½½test.md
   python3 backend/scheduler/daily_scanner.py
   ```

3. **éªŒè¯æˆåŠŸå**:
   - æ¢å¤å®Œæ•´è‚¡ç¥¨åˆ—è¡¨
   - å¯åŠ¨å®šæ—¶ä»»åŠ¡æˆ–systemdæœåŠ¡
   - ç­‰å¾…ä»Šå¤©18:00è‡ªåŠ¨è¿è¡Œ

4. **ç›‘æ§é¦–æ¬¡è¿è¡Œ**:
   ```bash
   tail -f backend/data/scan_log.txt
   ```
